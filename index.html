<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="styles/style.css">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrum Showdown</title>
</head>
<body>
    <div class="content">
        <div class="hand">
            <object class="hand__image" type="image/svg+xml" data="assets/hand-card.svg" ></object>
        </div>
        <div class="hand">
            <object class="hand__image" type="image/svg+xml" data="assets/hand-card.svg" ></object>
        </div>
        <div class="hand">
            <object class="hand__image" type="image/svg+xml" data="assets/hand-card.svg" ></object>
        </div>
        
        <div class="hand">
            <object class="hand__image" type="image/svg+xml" data="assets/hand-card.svg" ></object>
        </div>
        <div class="hand">
            <object class="hand__image" type="image/svg+xml" data="assets/hand-card.svg" ></object>
        </div>
        <div class="hand">
            <object class="hand__image" type="image/svg+xml" data="assets/hand-card.svg" ></object>
        </div>
        
        <div class="hand">
            <object class="hand__image" type="image/svg+xml" data="assets/hand-card.svg" ></object>
        </div>
        <div class="hand">
            <object class="hand__image" type="image/svg+xml" data="assets/hand-card.svg" ></object>
        </div>
        <div class="hand">
            <object class="hand__image" type="image/svg+xml" data="assets/hand-card.svg" ></object>
        </div>
    </div>

    <script>
        const handOrigin = {
            x: (628 / 720)*100,
            y: (528 / 720)*100
        }

        let angleOffset = 0
        const speed = 5
        const interval = 1000 / 60

        setInterval(() => {
            angleOffset += interval / 1000 * speed

            document.querySelectorAll('.hand').forEach((hand, i, hands) => {
                const handCount = hands.length
                const angle = ((i + Math.random() *0) / handCount) * 360 + angleOffset

                const handImage = hand.querySelector('.hand__image')
                const handName = hand.querySelector('.hand__name')

                /*
                const svg = handImage.getSVGDocument()
                const svgCard = svg.querySelector("#card")

                if (angle > 180) {
                    // svgCard.style.transformOrigin = '50% 50%'
                    // svgCard.style.transform = 'rotate(180deg)'
                    
                }
                */

                const direction = [Math.cos(angle / 180 * Math.PI), Math.sin(angle / 180 * Math.PI)]
                const maxComponent = direction
                    .map(a => Math.abs(a))
                    .reduce((a, b) => Math.max(a, b))
                const offset = direction
                    .map(a => a / maxComponent)
                    .map(a => (1 + a) / 2)

                handImage.style.transformOrigin = `${handOrigin.x}% ${handOrigin.y}%`
                handImage.style.transform = [
                    `translate(${-handOrigin.x}%, ${-handOrigin.y}%)`,
                    `rotate(${angle}deg)`
                ].join(' ')

                hand.style.top = `${offset[1]*100}vh`
                hand.style.left = `${offset[0]*100}vw`
            })
        }, interval)
    </script>
</body>
</html>